namespace SpriteKind {
    export const Wave = SpriteKind.create()
    export const Coral = SpriteKind.create()
    export const Knife = SpriteKind.create()
    export const Title = SpriteKind.create()
    export const Scene = SpriteKind.create()
}
function sharkDies (aShark: Sprite) {
    info.changeScoreBy(1)
    aShark.destroy(effects.bubbles, 200)
    timer.background(function () {
        music.jumpUp.play()
    })
}
function sharkOverlapsPlayer (aShark: Sprite) {
    if (!(dying)) {
        if (sharkIsBitingGet(aShark)) {
            // Check position of bite
            if (aShark.vx < 0 && aShark.x - 3 > hunter.left) {
                playerDies(true)
            } else if (aShark.vx > 0 && aShark.x + 3 < hunter.right) {
                playerDies(true)
            } else {
            	
            }
        } else {
        	
        }
    }
}
function sharkIsAttackingSet (aShark: Sprite, value: boolean) {
    sprites.setDataBoolean(aShark, sharkIsAttacking, value)
}
function sharksFrenzy () {
    for (let value of sprites.allOfKind(SpriteKind.Enemy)) {
        if (value.vx < 0 && value.x < hunter.x || value.vx > 0 && value.x > hunter.x) {
            value.vx = 0 - value.vx
            setSharkAnimation(value, true)
        }
        value.follow(hunter, Math.abs(value.vx * 1.2))
    }
}
function playMusic () {
    timer.background(function () {
        music.playMelody(music.convertRTTTLToMelody("Jaws:d=4,o=5,b=112:e,8f,2p,e,8f,2p,8e,8f,8e,8f,8e,8f,8e,8f,8d,8e,8e,8f,8d,8e,8e,8f,8e,8f,8e,8f,8e,8f,8e,8f,8d,8e,8e,8f,8d,8e,8e,8f,8e,8f,8e,8f,8p,16p,16d#,16g,2c#6,2p,16d#,16g,16c#6,16d#6,16a#,16d#,2c#"), 224)
    })
}
function setSharkProperties () {
    sharkImagesLeft = [img`
        .............ccfff..............
        ...........ccddbcf..............
        ..........ccddbbf...............
        ..........fccbbcf...............
        .....fffffccccccff.........ccc..
        ...ffbbbbbbbcbbbbcfff....ccbbc..
        ..fbbbbbbbbcbcbbbbcccff.cdbbc...
        ffbbbbbbffbbcbcbbbcccccfcdbbf...
        fbcbbb11ff1bcbbbbbcccccffbbf....
        fbbb11111111bbbbbcccccccbbcf....
        .fb11133cc11bbbbcccccccccccf....
        ..fccc31c111bbbcccccbdbffbbcf...
        ...fc13c111cbbbfcddddcc..fbbf...
        ....fccc111fbdbbccdcc.....fbbf..
        ........ccccfcdbbcc........fff..
        .............fffff..............
        `, img`
        .............ccfff..............
        ............cddbbf..............
        ...........cddbbf...............
        ..........fccbbcf............ccc
        ....ffffffccccccff.........ccbbc
        ..ffbbbbbbbbbbbbbcfff.....cdbbc.
        ffbbbbbbbbbcbcbbbbcccff..cddbbf.
        fbcbbbbbffbbcbcbbbcccccfffdbbf..
        fbbb1111ff1bcbcbbbcccccccbbbcf..
        .fb11111111bbbbbbcccccccccbccf..
        ..fccc33cc11bbbbccccccccfffbbcf.
        ...fc131c111bbbcccccbdbc...fbbf.
        ....f33c111cbbbfdddddcc.....fbbf
        .....ff1111fbdbbfddcc........fff
        .......cccccfbdbbfc.............
        .............fffff..............
        `, img`
        ..............cfff..............
        ............ccddbf..............
        ...........cbddbff.........ccc..
        ..........fccbbcf.........cbbc..
        ...fffffffccccccff.......cdbc...
        .ffcbbbbbbbbbbbbbcfff....cdbf...
        fcbbbbbbbbbcbbbbbbcccff.cdbf....
        fbcbbbbffbbbcbcbbbcccccffdcf....
        fbb1111ffbbbcbcbbbccccccbbcf....
        .fb11111111bbcbbbccccccccbbcf...
        ..fccc33cb11bbbbcccccccfffbbf...
        ...fc131c111bbbcccccbdbc..fbbf..
        ....f33c111cbbccdddddbc....fff..
        .....ff1111fdbbccddbcc..........
        .......cccccfdbbbfcc............
        .............fffff..............
        `, img`
        .............ccfff..............
        ............cddbbf..............
        ...........cddbbf...............
        ..........fccbbcf............ccc
        ....ffffffccccccff.........ccbbc
        ..ffbbbbbbbbbbbbbcfff.....cdbbc.
        ffbbbbbbbbbcbcbbbbcccff..cddbbf.
        fbcbbbbbffbbcbcbbbcccccfffdbbf..
        fbbb1111ff1bcbcbbbcccccccbbbcf..
        .fb11111111bbbbbbcccccccccbccf..
        ..fccc33cc11bbbbccccccccfffbbcf.
        ...fc131c111bbbcccccbdbc...fbbf.
        ....f33c111cbbbfdddddcc.....fbbf
        .....ff1111fbdbbfddcc........fff
        .......cccccfbdbbfc.............
        .............fffff..............
        `]
    sharkImagesRight = []
    sharkAttackImagesLeft = [
    img`
        .................ccfff..............
        ................cddbbf..............
        ...............cddbbf...............
        ..............fccbbcf............ccc
        ........ffffffccccccff.........ccbbc
        ......ffbbbbbbbbbbbbbcfff.....cdbbc.
        ....ffbbbbbbbbbcbcbbbbcccff..cddbbf.
        ....fbcbbbbbffbbcbcbbbcccccfffdbbf..
        ....fbbb1111ff1bcbcbbbcccccccbbbcf..
        .....fb11111111bbbbbbcccccccccbccf..
        ......fccc33cc11bbbbccccccccfffbbcf.
        .......fc131c111bbbcccccbdbc...fbbf.
        ........f33c111cbbbfdddddcc.....fbbf
        .........ff1111fbdbbfddcc........fff
        ...........cccccfbdbbfc.............
        .................fffff..............
        `,
    img`
        .................ccfff..............
        ................cddbbf..............
        ...............cddbbf...............
        .........ffffffccbbcf...............
        ......fffbbbbbbbbcccff..............
        .....fbbbbbbbbbbbbbbbcfff......ccccc
        .....bcbbbbbffbcbcbbbbcccff...cdbbbc
        .....bbb1111ffbbcbcbbbcccccffcddbbc.
        .....fb11111111bcbcbbbcccccccbdbbf..
        ......fccc33c11bbbbbbcccccccccbbcf..
        .......fc131cc11bbbbccccccccffbccf..
        ........f33c1111bbbcccccbdbc..fbbcf.
        .........ff1111cbbbfdddddcc....fbbf.
        ...........ccc1fbdbbfddcc.......fbbf
        ..............ccfbdbbfc..........fff
        .................fffff..............
        `,
    img`
        ..................ccfff.............
        .................cddbbf.............
        ........fffffffffddbbf..............
        .......fbbbbbbbbbfcbcf..............
        .......fbbc111bffbbccffff...........
        .......fb111111ffbbbbbcccff....ccccc
        ........f1cc3311bbcbcbbccccf..cdbbbc
        ........fcc131c1bbbcbcbcccccfcddbbc.
        .........f111111bbbcbcbccccccbdbbf..
        .........f1111111bbbbbccccccccbbcf..
        ..........f111111bbbbcccccccffbccf..
        ...........c1111cbbbcccccbdbc.fbbcf.
        ............cc11cbbbfddddddc...fbbf.
        ..............cffbdbbfdddcc.....fbbf
        .................fbdbbfcc........fff
        ..................fffff.............
        `,
    img`
        ....................ccfff...........
        ..........fffffffffcbbbbf...........
        .........fbbbbbbbbbfffbf............
        .........fbb111bffbbbbff............
        .........fb11111ffbbbbbcff..........
        .........f1cccc11bbcbcbcccf.........
        ..........fc1c1c1bbbcbcbcccf...ccccc
        ............c3331bbbcbcbccccfccddbbc
        ...........c333c1bbbbbbbcccccbddbcc.
        ...........c331c11bbbbbcccccccbbcc..
        ..........cc13c111bbbbccccccffbccf..
        ..........c111111cbbbcccccbbc.fccf..
        ...........cc1111cbbbfdddddc..fbbcf.
        .............cccffbdbbfdddc....fbbf.
        ..................fbdbbfcc......fbbf
        ...................fffff.........fff
        `,
    img`
        ...........fffffff...ccfff..........
        ..........fbbbbbbbffcbbbbf..........
        ..........fbb111bbbbbffbf...........
        ..........fb11111ffbbbbff...........
        ..........f1cccc1ffbbbbbcff.........
        ..........ffc1c1c1bbcbcbcccf........
        ...........fcc3331bbbcbcbcccf..ccccc
        ............c333c1bbbcbcbccccfcddbbc
        ............c333c1bbbbbbbcccccddbcc.
        ............c333c11bbbbbccccccbbcc..
        ...........cc331c11bbbbccccccfbccf..
        ...........cc13c11cbbbcccccbbcfccf..
        ...........c111111cbbbfdddddc.fbbcf.
        ............cc1111fbdbbfdddc...fbbf.
        ..............cccfffbdbbfcc.....fbbf
        ....................fffff........fff
        `,
    img`
        ....................................
        ....................................
        ....................................
        ...............ccffff...............
        ..............cddbbbf...............
        .......ffffffcddbbbf................
        .....ffbbbbbbbbbbbbbcfff.......ccccc
        ...ffbbbbbbbbcbcbbbbbcccff....cdbbbc
        ..fbbbbbbbbbbcbbcbbbbcccccfffcddbbc.
        .fbcbbbbbbbbbbcbcbbbbccccccccbdbbf..
        .fbbbbbbbfffbbcbbbbbccccccccccbbcf..
        .ffbb1111fffbbcbbbbcccccccbcffbccf..
        ..ff111111111bbbbccccccbbbcc..fbbcf.
        ....ccccccc111bdbbbfddbccc.....ffbbf
        ........ccccccfbdbbbfcc..........fff
        ...............ffffff...............
        `
    ]
    sharkAttackImagesRight = []
    for (let index = 0; index <= sharkImagesLeft.length - 1; index++) {
        anImage = sharkImagesLeft[index].clone()
        anImage.flipX()
        sharkImagesRight[index] = anImage
    }
    for (let index2 = 0; index2 <= sharkAttackImagesLeft.length - 1; index2++) {
        anImage = sharkAttackImagesLeft[index2].clone()
        anImage.flipX()
        sharkAttackImagesRight[index2] = anImage
    }
    sharkIsAttacking = "dataSharkIsAttacking"
    sharkIsBiting = "dataSharkIsBiting"
    sharkNextAttackTime = "dataSharkNextAttackTime"
    sharkAttackMin = 500
    sharkAttackMax = 3000
    sharkAnimationSpeed = 200
}
function setPlayerPosition () {
    hunter.x = scene.screenWidth() / 2
    hunter.y = yMin
    animation.stopAnimation(animation.AnimationTypes.All, hunter)
    hunter.setImage(swimmingImagesRight[0])
    controller.moveSprite(hunter, swimmingSpeedX, swimmingSpeedY)
    character.setCharacterAnimationsEnabled(hunter, true)
    dying = false
}
function adjustSceneSpriteSpeed (sceneSprite: Sprite, sceneAdjustment: number, movingSprite: Sprite) {
    if (movingSprite.vx == 0) {
        sceneSprite.vx = 0
    } else {
        sceneSprite.vx = 0 - movingSprite.vx * sceneAdjustment
    }
}
function setPlayer () {
    setPlayerVariables()
    hunter = sprites.create(swimmingImagesRight[0], SpriteKind.Player)
    setPlayerAnimations()
    setPlayerPosition()
    hunter.setFlag(SpriteFlag.StayInScreen, true)
    hunter.setFlag(SpriteFlag.ShowPhysics, false)
    playerHealth = statusbars.create(20, 4, StatusBarKind.Health)
    playerHealth.attachToSprite(hunter)
    playerHealth.setFlag(SpriteFlag.Invisible, false)
    knife = sprites.create(kniveImagesRight[0], SpriteKind.Knife)
    knife.setFlag(SpriteFlag.Invisible, true)
}
function sharkIsBitingSet (aShark: Sprite, value: boolean) {
    sprites.setDataBoolean(aShark, sharkIsBiting, value)
}
controller.A.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(attacking) && !(dying)) {
        hunterAttacks()
    }
})
statusbars.onStatusReached(StatusBarKind.Health, statusbars.StatusComparison.EQ, statusbars.ComparisonType.Percentage, 10, function (status) {
    scene.cameraShake(4, 500)
    music.jumpDown.play()
})
function showTitleScreen () {
    sceneSprite = sprites.create(img`
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        . . . . . . . . . . . . . . . . 
        `, SpriteKind.Scene)
    showingIntroduction = true
    scene.setBackgroundImage(img`
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999988999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9998999999988899999999999999989999999999999988888899999999999899999999999999999999999999988889999999999998888999999999999999999999999999999999998888899999999999
        9988899998888899999999999998888899999999988888888889999999988888899999999999888899999998888888999999999888888899999999999999988888899999999998888888888999999999
        8888888888888889999999988888888889999988888888888888888888888888888889999888888888888888888888889999988888888888899999999998888888888999999888888888888899999998
        8888888888888888888998888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888999999888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888878888888888888888888888888888888888888888888888888888888888888888888888888888888887888888888888888888888888888888888888888888888888888888888888888888888
        888888887c887888888888888888788888887788888888888888888888788888888888888888878888888888887888888888888888888788888888888878888778888888887878888888888877888888
        8878888cccc78888788888888888777778887888888788888888778888788888888888888888878888cccccc887888888888788888887788877788888778888778888888887877888888878887888887
        8778888cccccc887cccc877888887cccccc78888887788888888c7c88878cccccccc7777788887888cc777778878788888887778888788788878888cc7c88888778888888878c777888c778888788887
        8777888ccccccc77cccc877888887cccccc888888887c888cccc77cc8887cccccccccc778888877ccccccccc77788778888778c77c77887888878ccc7cccc888887cc88c877cccc77ccc7c8888778887
        c88788cccccccccccccc777788cccccccccccccc888c777cccc77ccc88cc777cccc777cc8888887777cccccc8888ccc77c7788cccccc8cc77ccccccccccccc888ccccccc788cccccc77ccc888cc7cc77
        ccc78ccccccccccccc8778887ccccccccccccc88888ccccccc7ccc8888cccccccccccccccc88888ccccccccc8888cccccccc8ccccccccccccccccccccccccc888ccccccccccccccccccccc888ccccccc
        cccc887ccccccccc8877cccc77cccccccccc8888888cccccccccc888888888ccccccccc88888ccccccccccc88888cccccccc88ccccccccc88cccccccccccc8888ccccccccc8ccccccccc88888ccccccc
        cccc887ccccccccc88ccccccc78ccccccc888888888cccccccccccc8888888ccccccc8888888cccccccccccc8888ccccccccc8cccccccccc888cccccccc888888ccccccccc8cccccccc888888ccccccc
        ccc88878ccccc88888cccccc7788ccccc8888888888ccccccccc8888888888cccccc88888888cccccccccccc88888ccccccccccccccccccc8888ccccccc8888888cccccccc8ccccccccc88888ccccccc
        `)
    setScene()
    fadeIn()
    title1Position = sprites.create(img`
        6 . . . . . . . . . . . . . . 6 
        . 6 . . . . . . . . . . . . 6 . 
        . . 6 . . . . . . . . . . 6 . . 
        . . . 6 . . . . . . . . 6 . . . 
        . . . . 6 . . . . . . 6 . . . . 
        . . . . . 6 . . . . 6 . . . . . 
        . . . . . . 6 . . 6 . . . . . . 
        . . . . . . . 6 6 . . . . . . . 
        . . . . . . . 6 6 . . . . . . . 
        . . . . . . 6 . . 6 . . . . . . 
        . . . . . 6 . . . . 6 . . . . . 
        . . . . 6 . . . . . . 6 . . . . 
        . . . 6 . . . . . . . . 6 . . . 
        . . 6 . . . . . . . . . . 6 . . 
        . 6 . . . . . . . . . . . . 6 . 
        6 . . . . . . . . . . . . . . 6 
        `, SpriteKind.Title)
    title1Position.setFlag(SpriteFlag.Invisible, true)
    title1Position.setPosition(scene.screenWidth() / 3, scene.screenHeight() / 3)
    title2Position = sprites.create(img`
        4 . . . . . . . . . . . . . . 4 
        . 4 . . . . . . . . . . . . 4 . 
        . . 4 . . . . . . . . . . 4 . . 
        . . . 4 . . . . . . . . 4 . . . 
        . . . . 4 . . . . . . 4 . . . . 
        . . . . . 4 . . . . 4 . . . . . 
        . . . . . . 4 . . 4 . . . . . . 
        . . . . . . . 4 4 . . . . . . . 
        . . . . . . . 4 4 . . . . . . . 
        . . . . . . 4 . . 4 . . . . . . 
        . . . . . 4 . . . . 4 . . . . . 
        . . . . 4 . . . . . . 4 . . . . 
        . . . 4 . . . . . . . . 4 . . . 
        . . 4 . . . . . . . . . . 4 . . 
        . 4 . . . . . . . . . . . . 4 . 
        4 . . . . . . . . . . . . . . 4 
        `, SpriteKind.Title)
    title2Position.setFlag(SpriteFlag.Invisible, true)
    title2Position.setPosition(scene.screenWidth() / 3 + title2Position.width * 2, scene.screenHeight() - scene.screenHeight() / 2)
    title1 = sprites.create(img`
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ......................66666.....66...........................66.................
        ...................6666....6....66...........................66.................
        .................66.............66...........................6..................
        ................6................6...........................66.................
        ...............6................66...........................66.................
        ..............66.................6...........................66.................
        ..............666................6...........................66.................
        ...............6666666...........6...........................66.................
        ................666.666666666....6............................6.................
        ..........................6666...6.66666.....66666.....6.6666.6....6............
        ............................666..66....66...6....66...666.....6...6.............
        ............................666..6.....66.........6...66......6..6..............
        .............................66..6.....66.....66666...66......6.6...............
        ............................666..6.....66...66....6....6......666...............
        ............................66...6.....66..66.....6...66......6.66..............
        ............6...............66...6.....66..66....66...66......6..666............
        ...........66..............66...66.....66..66666666...66.....66....666..........
        ............66.............6....................................................
        .............66...........6.....................................................
        ..............666......666......................................................
        .................6666666........................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        `, SpriteKind.Title)
    sceneSprite = title1
    title1.left = scene.screenWidth()
    title1.y = title1Position.y
    title2 = sprites.create(img`
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        .........444444444444444........................................................
        ..........44....................................................................
        ..........44....................................................................
        ..........44....................................................................
        ...........44444444444..........................................................
        ...........44...................................................................
        ...........44...................................................................
        ...........4....................................................................
        ...........4..............4.4444...4444....4.44444...444444....4....4...........
        ...........44............444......44..44..444....4.......44...44...44...........
        ...........4.............44......44444444..4.....4......44....44....4...........
        ...........44............44.....44.........4.....4.....44.....4.....4...........
        ...........44.............4.....44.........4.....4.....4......4....44...........
        ...........44............44.....44.........4.....44...4......44....44...........
        ...........44............44......4......4..4.....44..44......44...4.4...........
        ...........44............44.......444444...4.....4..44444444..4444..4...........
        ...........44.......................................................4...........
        ...........44.......................................................4...........
        ..........444......................................................44...........
        ...................................................................44...........
        ...................................................................4............
        ............................................................4.....4.............
        ............................................................444444..............
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        ................................................................................
        `, SpriteKind.Title)
    title2.left = scene.screenWidth()
    title2.y = title2Position.y
    title1.follow(title1Position, 175)
    timer.after(500, function () {
        sceneSprite = title2
        title2.follow(title2Position, 175)
    })
    timer.after(3000, function () {
        sceneSprite = title1
        title1Position.x = 0 - title1Position.width * 2
        timer.after(500, function () {
            sceneSprite = title2
            title2Position.x = 0 - title2Position.width * 2
            timer.after(1500, function () {
                clearTitleScreen()
                fadeOut()
                fadeIn()
                setGame()
                showingIntroduction = false
            })
        })
    })
}
statusbars.onStatusReached(StatusBarKind.Health, statusbars.StatusComparison.EQ, statusbars.ComparisonType.Percentage, 30, function (status) {
    scene.cameraShake(4, 500)
    music.jumpDown.play()
})
function getSharkAnimationSpeed (aShark: Sprite) {
    aSharkSpeed = Math.abs(aShark.vx)
    aSharkAnimationSpeed = sharkAnimationSpeed
    if (aSharkSpeed < sharkSpeedXMax) {
        aSharkAnimationSpeed = sharkAnimationSpeed + sharkAnimationSpeed * (aSharkSpeed / sharkSpeedXMax)
    }
    return aSharkAnimationSpeed
}
function sharkNextAttackTimeSet (aShark: Sprite, time: number) {
    sprites.setDataNumber(aShark, sharkNextAttackTime, time)
}
controller.left.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(attacking)) {
        facingRight = false
    }
})
function adjustScene (basedOnSprite: Sprite) {
    for (let aWave of sprites.allOfKind(SpriteKind.Wave)) {
        if (aWave.right < 0) {
            aWave.left = scene.screenWidth()
        } else if (aWave.left > scene.screenWidth()) {
            aWave.right = 0
        }
        adjustSceneSpriteSpeed(aWave, waveSpeedAdjustment, basedOnSprite)
    }
    for (let aCoralReef of sprites.allOfKind(SpriteKind.Coral)) {
        if (aCoralReef.right < 0) {
            aCoralReef.left = scene.screenWidth()
        } else if (aCoralReef.left > scene.screenWidth()) {
            aCoralReef.right = 0
        }
        adjustSceneSpriteSpeed(aCoralReef, coralSpeedAdjustment, basedOnSprite)
    }
}
function checkBreathing () {
    if (hunter.y < yMin) {
        hunter.y = yMin
        if (!(dying)) {
            takingAir = true
            lastTimeNotTakingAir = game.runtime()
            playerHealth.value = 100
        }
    } else if (hunter.y > yMin + 2) {
        takingAir = false
    }
    if (!(takingAir) && !(dying)) {
        if (lastTimeNotTakingAir + loseHealthPerMilliseconds < game.runtime()) {
            playerHealth.value += -1
            lastTimeNotTakingAir = game.runtime()
        }
    }
    hunter.z = hunter.y
}
statusbars.onStatusReached(StatusBarKind.Health, statusbars.StatusComparison.EQ, statusbars.ComparisonType.Percentage, 0, function (status) {
    scene.cameraShake(4, 500)
    if (!(dying)) {
        playerDies(false)
    }
})
function sharkIsBitingGet (aShark: Sprite) {
    return sprites.readDataBoolean(aShark, sharkIsBiting)
}
function restartAfterDying () {
    info.changeLifeBy(-1)
    for (let value2 of sprites.allOfKind(SpriteKind.Enemy)) {
        value2.destroy(effects.bubbles, 500)
    }
    timer.after(1500, function () {
        setPlayerPosition()
        playerHealth.value = 100
    })
}
function playerDies (byShark: boolean) {
    if (byShark) {
    	
    } else {
    	
    }
    animation.stopAnimation(animation.AnimationTypes.All, hunter)
    character.setCharacterAnimationsEnabled(hunter, false)
    dying = true
    controller.moveSprite(hunter, 0, 0)
    hunter.vy = 0 - swimmingSpeedY / 2
    if (facingRight) {
        animation.runImageAnimation(
        hunter,
        dyingImagesRight,
        hunterAnimationSpeed,
        true
        )
    } else {
        animation.runImageAnimation(
        hunter,
        dyingImagesRight,
        hunterAnimationSpeed,
        true
        )
    }
    sharksFrenzy()
    playerHealth.value = 0
    timer.background(function () {
        music.powerDown.play()
    })
    timer.after(3000, function () {
        restartAfterDying()
    })
}
controller.right.onEvent(ControllerButtonEvent.Pressed, function () {
    if (!(attacking)) {
        facingRight = true
    }
})
function spawnEnemies () {
    if (nextTimeToSpawnEnemies < game.runtime() && !(dying)) {
        nextTimeToSpawnEnemies = getNextSpawnTime()
        aShark = sprites.create(sharkImagesLeft[0], SpriteKind.Enemy)
        aShark.top = randint(yMin, scene.screenHeight() - aShark.height)
        aShark.setFlag(SpriteFlag.AutoDestroy, true)
        aShark.z = aShark.y
        sharkIsAttackingSet(aShark, false)
        sharkIsBitingSet(aShark, false)
        sharkNextAttackTimeSet(aShark, game.runtime() + randint(sharkAttackMin, sharkAttackMax) + randint(0, sharkAttackMin) / 2)
        if (Math.percentChance(50)) {
            aShark.left = scene.screenWidth() - 5
            aShark.vx = 0 - randint(sharkSpeedXMin, sharkSpeedXMax)
        } else {
            aShark.right = 5
            aShark.vx = randint(sharkSpeedXMin, sharkSpeedXMax)
            aShark.setImage(sharkImagesRight[0])
        }
        setSharkAnimation(aShark, false)
    }
}
function setSharkAnimation (aShark: Sprite, isAttacking: boolean) {
    animation.stopAnimation(animation.AnimationTypes.All, aShark)
    if (aShark.vx < 0) {
        if (isAttacking) {
            animation.runImageAnimation(
            aShark,
            sharkAttackImagesLeft,
            getSharkAnimationSpeed(aShark),
            true
            )
        } else {
            animation.runImageAnimation(
            aShark,
            sharkImagesLeft,
            getSharkAnimationSpeed(aShark),
            true
            )
        }
    } else {
        if (isAttacking) {
            animation.runImageAnimation(
            aShark,
            sharkAttackImagesRight,
            getSharkAnimationSpeed(aShark),
            true
            )
        } else {
            animation.runImageAnimation(
            aShark,
            sharkImagesRight,
            getSharkAnimationSpeed(aShark),
            true
            )
        }
    }
}
function fadeIn () {
    color.startFade(color.Black, color.originalPalette, 1500)
    color.pauseUntilFadeDone()
}
function fadeOut () {
    color.startFade(color.originalPalette, color.Black, 1500)
    color.pauseUntilFadeDone()
}
function setScene () {
    waveSpeedAdjustment = 0.8
    waveImages = [img`
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9919999999991199999999999999999999999999999999911999999999999999199999999999999999999999991999999999999999999999999999999999999999999999999999999919999999999999
        9991999999911199999999999919111999999999999111118199999999991111199999999999999119999999911999999999999919991199999999999999999119999999999999991119919999999991
        9918199991188119999999991111181199999991111188888819999999991811199999999999111119999991118881199999999118881119999999999999911199919999999991118888811999999199
        9188899111888819999999911118888819999911118888888811999999111888811919999991188819999918888888119999911188888811199999999991118888111999999111888888888199199999
        8888881188888811999991188888888811991988888888888881188881188888888881999881888811188818888888881999118888888888111999999911888888888119999888888888888811999198
        8888888888888888888911888888888881188888888888888888888888888888888888888888888888188888888888888888188888888888818199999818888888888888888888888888888881188888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        `, img`
        9999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999999999999999999999911199999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999999
        9999999999999999999999999991999999999999999999111999999999999999999999999999999999999999999119999999999999999991999999999999911999999999999999999199999999999999
        9911991999919999199999999991119999999999999911111999999999999919999999999999999199999999991199999999999999111111999999999999991199999999999999991199119999999999
        9991999991911119999999999191181111991999991118881199999911999111999999999999111199999999911889999999999991188911999999999999991911999999999999991888891199999999
        1181199991888811999999991118888811999991111888888811999991111188111999999911888811111191118888911999991111188891111999999999111881199999999111118888881111999911
        8888111888888881199991111888888811199918888888888888888888111888881119999118888888888118888888881111981888888888891199999111888888111111999188888888888811199918
        8888888888888888118118888888888888888888888888888888888888888888888888888888888888888818888888888118888888888888888111999188888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        `]
    waves = []
    for (let index3 = 0; index3 <= waveImages.length - 1; index3++) {
        aWave2 = sprites.create(waveImages[index3], SpriteKind.Wave)
        aWave2.setFlag(SpriteFlag.Ghost, true)
        aWave2.top = 17
        aWave2.left = 0 + scene.screenWidth() * index3
        waves.push(aWave2)
    }
    yMin = waves[0].bottom - 3
    coralSpeedAdjustment = 0.4
    coralImages = [img`
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888877788888888888888888888888888888888888888888888888888888888888888888888888878888888888888888888888888888888888888888888888888888888888888888888888888888888
        7788887788888778887788888888888887778888788888887778888877778888788888888888888878888888888888888888888888888888888888888888888888888888888888888888888888878888
        8788887888888788888788888888788888878888777888888877888888778888877777888888888778888888777888888888888888788888888888888888887888888888888888878888888888877888
        8788887888887888888778887888778888778888887888888887777888878888888887778888887788887777788888877888888877888888888877788888877888888888888888887888888888888778
        8788887788887788888778877888778887788888887777888888877888877778888887788888878888887778888888878888888878888888888778888888887777777788888888887888888888888788
        7788887788888788888788877788788877888888888887788887778888887778887778888888877788888877878888877788888878888888888778888888888888888877888888777888888888888788
        78888877c8878788888788887887788877877888888887788877888887877888877888888888788777887777878888888788888878887888888887788788887788888888778787788888888778887888
        77888877cc777787888788877887777787878888887778888877788887878888878888888888788877cc7cc8878888877887888878877888777887787788887788877777778777888888788878878878
        778888cccc77887cccc877878887cccccc78888887778888877c7c888787cccccc777777888878887c777778878787778887778878788788878877cc7c88888778878888878c777888c7788887878878
        777888ccccccc77cccc877878887cccccc888888887c888cc7c77cc8887ccccccc7cc778888877cc7cccccc77788778888778c77c77887888878ccc7cccc888887cc88c877cccc77ccc7c88887778878
        cc788cccccccccccccc777788cccccccccccccc888c777cccc77ccc88cc777cccc777cc8888887777cccccc8888ccc77c7788cccccc8cc77ccccccccccccc888ccccccc788cccccc77ccc888cc7cc778
        cc78ccccccccccccc8778887ccccccccccccc88888ccccccc7ccc8888cccccccccccccccc88888ccccccccc8888cccccccc8ccccccccccccccccccccccccc888ccccccccccccccccccccc888cccccccc
        ccc887ccccccccc8877cccc77ccccc7cccc8888888cccccccccc888888888ccccccccc88888ccccccccccc88888cccccccc88ccccccccc88cccccc777ccc8888ccc77cccc8ccc7ccccc88888cccccccc
        ccc887ccccccccc88ccccccc78ccccccc888888888ccccc7cccccc8888888cc7cccc8888888cc7ccccccccc8888cccccc7cc8cc7ccccccc888c7cccccc888888cccccc7777cccccccc888888cccc77cc
        cc88878ccccc88888cccccc7788c77cc8888888888cccc7cccc8888888888cccccc88888888cccccc7ccccc8888877ccccccccc7ccccc7c8888ccccccc8888888cccccccc8ccccccccc88888cccccccc
        `, img`
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        8888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
        7788888877888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888887788
        8878888887888878888888888887888888888888878888888888888888888888888888888888888888888888888888888888888888878888888888888888888888888888888888888888888888877888
        8887788888788878888888888887777788887888878888888878888888888788888778888888888877888888888888887788788888877778888888888888888888888778888888878888888888788888
        8888878877788877888888777788878778887788877888888877788888888877887778888888887778888788888888877788878888888877888888888888888888888878888888887888888888777888
        8888778778888887778888788788888878888788888788888888778888888787888878888888888788887788878888887888878887888887777778888888888888888778888888888788888888887888
        8887788778878888878888888787888887877788888877888888778887888777788878888888788778887888878888878888887777887888888877888788887788887888878788887888888778887888
        878788cccc788777778888887787777777777788887888778887788887888788888777888888788877cc7cc8878888878887888778877888777887887788887788887888878778877888788878887878
        777888ccccc7787cccc8777788877ccccc78888887777777888c7c88878cc7ccccc7777788887888c7777778878788878887778777787788878887cc7c88888778777888878c777788c7788887878878
        777888ccccccc77cccc877888887cccccc888888887c888cccc77cc8887cccccccccc778888877cc77ccccc77788778788778c77c77787888878ccc7cccc8888877788c877cccc777cc7c88887778878
        88788cccccccccccccc777788cccccccccccccc888c777cccc77ccc88cc777cccc777777888887777cccccc8888ccc77c7788cccccc8cc77ccccccccccccc888c77cccc788cccccc77ccc888cc7cc778
        cc78ccccccccccccc8778887ccccccccc77cc88888ccccccc7ccc8888cccccccccc7ccc7c888887cccccccc8888cccccccc8ccccccccccccccccccccccc777777cccccccccccccccccccc888cccccccc
        ccc887ccccccccc8877cccc77cccccccccc7778888ccccccccc7778888888ccccccccc87778ccccccccccc88888cccccccc88ccccccccc88ccccc77ccccc8888ccccccccc8ccccccccc88888cccccccc
        ccc887ccccccccc88ccccccc78ccccccc888778888ccccccccccc77888888ccccccc8888888ccccc7777ccc8888ccccccccc8777ccccccc888cc77cccc888888ccccccccc8cccccccc888888cccccccc
        cc88878ccccc88888cccccc7788ccccc8888888888ccccccccc8888888888cccccc88888888cccccccc7ccc88888ccccc7777cccccccccc8888ccccccc8888888cccccccc8ccccccccc88888cccccccc
        `]
    coralReefs = []
    for (let index22 = 0; index22 <= coralImages.length - 1; index22++) {
        aCoralReef2 = sprites.create(coralImages[index22], SpriteKind.Coral)
        aCoralReef2.setFlag(SpriteFlag.Ghost, true)
        aCoralReef2.bottom = scene.screenHeight()
        aCoralReef2.left = 0 + scene.screenWidth() * index22
        coralReefs.push(aCoralReef2)
    }
}
function sharksAttack () {
    for (let value3 of sprites.allOfKind(SpriteKind.Enemy)) {
        if (!(sharkIsAttackingGet(value3)) && sharkNextAttackTimeGet(value3) < game.runtime()) {
            timer.background(function () {
                sharkIsAttackingSet(value3, true)
                setSharkAnimation(value3, true)
                timer.background(function () {
                    timer.after(getSharkAnimationSpeed(value3) * (Math.min(sharkAttackImagesLeft.length, sharkAttackImagesRight.length) / 2), function () {
                        sharkIsBitingSet(value3, true)
                    })
                })
                timer.background(function () {
                    timer.after(getSharkAnimationSpeed(value3) * Math.min(sharkAttackImagesLeft.length, sharkAttackImagesRight.length), function () {
                        sharkNextAttackTimeSet(value3, game.runtime() + randint(sharkAttackMin, sharkAttackMax))
                        sharkIsAttackingSet(value3, false)
                        sharkIsBitingSet(value3, false)
                        setSharkAnimation(value3, false)
                    })
                })
            })
        }
    }
}
function setEnemies () {
    spawnTimeMin = 1500
    spawnTimeMax = 5000
    nextTimeToSpawnEnemies = getNextSpawnTime()
    sharkSpeedXMin = 17
    sharkSpeedXMax = 27
    setSharkProperties()
}
function setPlayerAnimations () {
    character.loopFrames(
    hunter,
    swimmingImagesRight,
    hunterAnimationSpeed,
    character.rule(Predicate.MovingRight)
    )
    character.loopFrames(
    hunter,
    swimmingImagesLeft,
    hunterAnimationSpeed,
    character.rule(Predicate.MovingLeft)
    )
}
function setKnifePosition () {
    knife.top = hunter.top + 1
    if (facingRight) {
        knife.left = hunter.right - knife.width
    } else {
        knife.right = hunter.left + knife.width
    }
}
function hunterAttacks () {
    attacking = true
    character.setCharacterAnimationsEnabled(hunter, false)
    knife.setFlag(SpriteFlag.Invisible, false)
    if (facingRight) {
        animation.runImageAnimation(
        hunter,
        attackingImagesRight,
        hunterAnimationSpeed,
        false
        )
        animation.runImageAnimation(
        knife,
        kniveImagesRight,
        hunterAnimationSpeed,
        false
        )
        timer.after(500, function () {
            attacking = false
            hunter.setImage(swimmingImagesRight[0])
            character.setCharacterAnimationsEnabled(hunter, true)
            animation.stopAnimation(animation.AnimationTypes.All, knife)
            knife.setFlag(SpriteFlag.Invisible, true)
        })
    } else {
        animation.runImageAnimation(
        hunter,
        attackingImagesLeft,
        hunterAnimationSpeed,
        false
        )
        animation.runImageAnimation(
        knife,
        knifeImagesLeft,
        hunterAnimationSpeed,
        false
        )
        timer.after(500, function () {
            attacking = false
            hunter.setImage(swimmingImagesLeft[0])
            character.setCharacterAnimationsEnabled(hunter, true)
            animation.stopAnimation(animation.AnimationTypes.All, knife)
            knife.setFlag(SpriteFlag.Invisible, true)
        })
    }
}
function clearTitleScreen () {
    for (let value4 of sprites.allOfKind(SpriteKind.Title)) {
        value4.destroy()
    }
    sceneSprite.destroy()
}
function getNextSpawnTime () {
    return game.runtime() + randint(spawnTimeMin, spawnTimeMin)
}
function setGame () {
    setPlayer()
    setEnemies()
    playMusic()
}
function sharkIsAttackingGet (aShark: Sprite) {
    return sprites.readDataBoolean(aShark, sharkIsAttacking)
}
function checkAttacks () {
    for (let value22 of sprites.allOfKind(SpriteKind.Enemy)) {
        if (attacking && knife.overlapsWith(value22)) {
            sharkDies(value22)
        } else if (value22.overlapsWith(hunter)) {
            sharkOverlapsPlayer(value22)
        }
    }
}
function setPlayerVariables () {
    swimmingSpeedX = 30
    swimmingSpeedY = 25
    hunterAnimationSpeed = 200
    maxLives = 5
    info.setLife(maxLives)
    info.setScore(0)
    sceneIncreaseSpeed = 0
    lastTimeNotTakingAir = game.runtime()
    loseHealthPerMilliseconds = 250
    attacking = false
    takingAir = true
    facingRight = true
    dying = false
    swimmingImagesRight = [img`
        ................................
        ................................
        ................................
        ................................
        ............4...................
        ..........433333......1.........
        ...........43.333....111........
        ...e......4.1..333..11111.......
        ..eee........1..335511115.......
        .eeeee......5.1..551111511......
        ...eee3..33355.55555ee3e3.......
        ....ee3333335545555533333.......
        ......333334444555553333........
        ..........335545555533..........
        eeeee....3333545555553..........
        .eeee333333335155555555.........
        eeeee333333355.555555553........
        e......3.3335.......55333.......
        e.....................3333...33.
        ........................3333333.
        ................................
        ................................
        ................................
        ................................
        `, img`
        ................................
        ................................
        ................................
        ................................
        ................................
        .....................333334.....
        ....................33133333....
        ...................33111..33.4..
        ..e...............5311111...4...
        .eeeee......5.....5511115..4.1..
        eeeeee33.33355.55551111511....1.
        ee..ee33333355455555ee3e3......1
        ......3333344445555533333.......
        eeeee3333333554555553333........
        .eeee33333333545555533..........
        eeeee333333335155555535.........
        e......3.33355.55553355.........
        e...........5.....3335..........
        ...........33....333............
        ............333333..............
        ................................
        ................................
        ................................
        ................................
        `]
    swimmingImagesLeft = []
    dyingImagesRight = [img`
        ...................33333........
        ..................333..3........
        .................33.......1.....
        .................333......15....
        ..................335...33511...
        .e.....333.........555.33e111...
        .e...e333333......555533331e14..
        .eeeee3333333.5..55553333e11114.
        ..eeee3..3333355155555333e1e1.34
        .eeeee....333355455555.33e11111.
        ............33554555555..e111.33
        e......33333335445555555..1...33
        e.....3333333345455555555....33.
        eeeee333333334554555...5533333..
        .eeee333...3..55........5333....
        eeeee.........5.................
        `, img`
        .......................33333....
        ..e..................333...3....
        ..e.................333...1.....
        ..eeeee.............33....15....
        ...eeee33...........53..3351....
        ..eeeee333.........555.33e111...
        ........3333......555533331e1...
        .........3333.5..55553333e1111..
        ..........333355155555333e1e14.3
        ...........33355455555533e111.43
        .e.....33...33554555555..e11.134
        .e....333333335445555555..1.1.3.
        .eeee33333333345455555555..1.33.
        ..eee33..33334554555...553..33..
        .eeee3.....3..55........53333...
        ..............5..........333....
        `]
    dyingImagesLeft = []
    attackingImagesRight = [img`
        ................................
        ......................1.........
        .....................111........
        ....................11111.......
        ..................5511115.......
        ..................51111511......
        ..................55ee3e3.......
        .................55533333.......
        ................55553333........
        ...e.......555.5555533..........
        ..eee.......5545555553.....33...
        .eeeee...33355455555555.....3...
        e..eee33.334444455555553...33...
        ......3333333354555555333.33....
        .......33333335455555..3333.....
        ........33.333515.......33......
        ....e......3335.................
        ...eee.....3335.................
        ..eeeee3..3333..................
        ..e.eee33.3333..................
        .......333333...................
        ........3333....................
        .........33.....................
        ................................
        `, img`
        ................................
        ......................1.........
        .....................111........
        ....................11111.......
        ..................5511115.......
        ..................51111511......
        ..................55ee3e3.......
        .................55533333.......
        ................55553333........
        ...........5...5555533..........
        ............5545555553...33.....
        .eeeee...33355455555555...3.....
        ..eeee333334444455555553...3....
        .eeeee3333333354555555333.33....
        .e......3333335455555..3333.....
        .e....e....333515.......33......
        .....eee...3335.................
        ....eeeee..3335.................
        ....e.eee3.333..................
        .........33333..................
        ..........3333..................
        ...........333..................
        ............33..................
        ................................
        `]
    attackingImagesLeft = []
    kniveImagesRight = [img`
        3 3 . . . . . . . 
        . 3 3 3 . 4 . . . 
        . . 3 3 4 . . . . 
        . . . 4 . 1 . . . 
        . . 1 . . . 1 . . 
        . . . . . . . 1 . 
        . . . . . . . . . 
        . . . . . . . . . 
        . . . . . . . . . 
        `, img`
        . . . . . . . . . 
        . . . . . . . . . 
        . . . . . . . . . 
        . . 3 3 3 . . . . 
        . . . 3 3 3 4 . . 
        . . . . 3 4 . . . 
        . . . . 4 . 1 . . 
        . . . . . . . 1 . 
        . . . . . . . . 1 
        `]
    knifeImagesLeft = []
    for (let index4 = 0; index4 <= swimmingImagesRight.length - 1; index4++) {
        anImage = swimmingImagesRight[index4].clone()
        anImage.flipX()
        swimmingImagesLeft[index4] = anImage
    }
    for (let index42 = 0; index42 <= dyingImagesRight.length - 1; index42++) {
        anImage = dyingImagesRight[index42].clone()
        anImage.flipX()
        dyingImagesLeft[index42] = anImage
    }
    for (let index5 = 0; index5 <= attackingImagesRight.length - 1; index5++) {
        anImage = attackingImagesRight[index5].clone()
        anImage.flipX()
        attackingImagesLeft[index5] = anImage
    }
    for (let index6 = 0; index6 <= kniveImagesRight.length - 1; index6++) {
        anImage = kniveImagesRight[index6].clone()
        anImage.flipX()
        knifeImagesLeft[index6] = anImage
    }
}
function sharkNextAttackTimeGet (aShark: Sprite) {
    return sprites.readDataNumber(aShark, sharkNextAttackTime)
}
let dyingImagesLeft: Image[] = []
let sceneIncreaseSpeed = 0
let maxLives = 0
let knifeImagesLeft: Image[] = []
let attackingImagesLeft: Image[] = []
let attackingImagesRight: Image[] = []
let swimmingImagesLeft: Image[] = []
let spawnTimeMax = 0
let spawnTimeMin = 0
let aCoralReef2: Sprite = null
let coralReefs: Sprite[] = []
let coralImages: Image[] = []
let aWave2: Sprite = null
let waves: Sprite[] = []
let waveImages: Image[] = []
let sharkSpeedXMin = 0
let aShark: Sprite = null
let nextTimeToSpawnEnemies = 0
let hunterAnimationSpeed = 0
let dyingImagesRight: Image[] = []
let loseHealthPerMilliseconds = 0
let lastTimeNotTakingAir = 0
let takingAir = false
let coralSpeedAdjustment = 0
let waveSpeedAdjustment = 0
let facingRight = false
let sharkSpeedXMax = 0
let aSharkAnimationSpeed = 0
let aSharkSpeed = 0
let title2: Sprite = null
let title1: Sprite = null
let title2Position: Sprite = null
let title1Position: Sprite = null
let showingIntroduction = false
let sceneSprite: Sprite = null
let attacking = false
let kniveImagesRight: Image[] = []
let knife: Sprite = null
let playerHealth: StatusBarSprite = null
let swimmingSpeedY = 0
let swimmingSpeedX = 0
let swimmingImagesRight: Image[] = []
let yMin = 0
let sharkAnimationSpeed = 0
let sharkAttackMax = 0
let sharkAttackMin = 0
let sharkNextAttackTime = ""
let sharkIsBiting = ""
let anImage: Image = null
let sharkAttackImagesRight: Image[] = []
let sharkAttackImagesLeft: Image[] = []
let sharkImagesRight: Image[] = []
let sharkImagesLeft: Image[] = []
let sharkIsAttacking = ""
let hunter: Sprite = null
let dying = false
showTitleScreen()
game.onUpdate(function () {
    if (showingIntroduction) {
        adjustScene(sceneSprite)
    } else {
        adjustScene(hunter)
        checkBreathing()
        spawnEnemies()
        sharksAttack()
        checkAttacks()
        setKnifePosition()
    }
})
